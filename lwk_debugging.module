<?php

use Drupal\Core\Datetime\DrupalDateTime;
use Drupal\Core\Url;
use Drupal\Core\Link;
use Symfony\Component\HttpFoundation\RedirectResponse;

/*
 * Debugging routine to log to the <root folder>/LWKLWK.log IN arborcat.module
 */
function dblog(...$things_to_log) {



  $line_to_log = '';
  foreach ($things_to_log as $item) {
    if (strlen(json_encode($item)) < 1024) {
      $line_to_log = $line_to_log . ' ' . print_r($item, TRUE);
    }
    else {
      $line_to_log = '+++ OBJECT TOO LARGE TO LOG +++';
    }
  }
  // prepend date/time onto log line
  $now_date_time = new DrupalDateTime();
  $date_time_string = (string) $now_date_time->format('Y-m-d H:i:s');
  $caller = debug_backtrace(DEBUG_BACKTRACE_IGNORE_ARGS, 2)[1]['function'];
  $complete_line = '[' . $date_time_string . '] __' . $caller . '__:'. $line_to_log . "\n";
  error_log($complete_line, 3, "LWKLWK.log");
}


